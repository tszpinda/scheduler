<html>
<head>
<script type="text/javascript">
scheduler = {}
scheduler.json = {};
scheduler.json.parse = function (data) {
    if (typeof data == "string") {
        scheduler._temp = eval("(" + data + ")");
        data = (scheduler._temp) ? scheduler._temp.data || scheduler._temp.d || scheduler._temp : [];
    }
    if (data.dhx_security)
        dhtmlx.security_key = data.dhx_security;
    var collections = (scheduler._temp && scheduler._temp.collections) ? scheduler._temp.collections : {};
    var collections_loaded = false;
    for (var key in collections) {
        if (collections.hasOwnProperty(key)) {
            collections_loaded = true;
            var collection = collections[key];
            var arr = scheduler.serverList[key];
            if (!arr) continue;
            arr.splice(0, arr.length); //clear old options
            for (var j = 0; j < collection.length; j++) {
                var option = collection[j];
                var obj = {
                    key: option.value,
                    label: option.label
                }; // resulting option object
                for (var option_key in option) {
                    if (option.hasOwnProperty(option_key)) {
                        if (option_key == "value" || option_key == "label")
                            continue;
                        obj[option_key] = option[option_key]; // obj['value'] = option['value']
                    }
                }
                arr.push(obj);
            }
        }
    }
    if (collections_loaded)
        scheduler.callEvent("onOptionsLoad", []);
    var evs = [];
    for (var i = 0; i < data.length; i++) {
        var event = data[i];
        scheduler._init_event(event);
        evs.push(event);
    }
    return evs;
};

var data = {
	collections : [
      {
         "id":1,
         "type":1,
         "text":"BA1 3AX - 15T Concrete",
         "start_date":"15-08-2013 00:08",
         "end_date":"15-08-2013 00:08",
			"option" : {
				value : 1,
				label : "T-1"
			}
      },
      {
         "id":2,
         "type":2,
         "text":"BA1 3AX - Hire Pickup",
         "start_date":"14-08-2013 19:08",
         "end_date":"14-08-2013 23:08",
			"option" : {
				value : 1,
				label : "T-1"
			}
      }
   ]
}
scheduler._temp = data
scheduler.json.parse(data)
</script>
</head>
</html>
